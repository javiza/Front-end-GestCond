<div class="container">
  <!-- Columna izquierda -->
  <div class="formulario">
    <h3 class="col-title">Registro de Empresas Contratistas</h3>

    <form (ngSubmit)="registrarEmpresa()">
      <ion-item>
        <ion-label position="floating">Nombre Encargado</ion-label>
        <ion-input [(ngModel)]="nombre_encargado" name="nombre_encargado" required></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Nombre Empresa</ion-label>
        <ion-input [(ngModel)]="nombre_empresa" name="nombre_empresa" required></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Rubro</ion-label>
        <ion-input [(ngModel)]="rubro" name="rubro" required></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Teléfono</ion-label>
        <ion-input [(ngModel)]="telefono" name="telefono" required></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Email</ion-label>
        <ion-input [(ngModel)]="email" name="email" type="email" required></ion-input>
      </ion-item>

      <ion-button expand="block" type="submit" color="primary">
        {{ id ? 'Actualizar' : 'Registrar' }}
      </ion-button>

      <ion-button expand="block" color="medium" *ngIf="id" (click)="cancelarEdicion()">
        Cancelar edición
      </ion-button>
    </form>
  </div>

  <!-- Columna derecha -->
  <div class="lista">
    <h3 class="col-title">Lista de Empresas Contratistas</h3>

    <ion-list *ngIf="paginatedEmpresas.length > 0; else noEmpresas">
      <ion-item *ngFor="let e of paginatedEmpresas">
        <ion-label>
          <h2>{{ e.nombre_empresa }}</h2>
          <p>
            Encargado: {{ e.nombre_encargado }} <br />
            Rubro: {{ e.rubro }} <br />
            Teléfono: {{ e.telefono }} <br />
            Email: {{ e.email }}
          </p>
        </ion-label>
        <ion-button fill="clear" (click)="editarEmpresa(e)">
          <ion-icon slot="icon-only" name="create-outline"></ion-icon>
        </ion-button>
        <ion-button fill="clear" color="danger" (click)="eliminarEmpresa(e)">
          <ion-icon slot="icon-only" name="trash-outline"></ion-icon>
        </ion-button>
      </ion-item>
    </ion-list>

    <ng-template #noEmpresas>
      <p class="no-data">No hay empresas registradas.</p>
    </ng-template>

    <div class="paginacion" *ngIf="totalPages > 1">
      <ion-button fill="outline" (click)="prevPage()" [disabled]="currentPage === 1">
        Anterior
      </ion-button>
      <span>Página {{ currentPage }} de {{ totalPages }}</span>
      <ion-button fill="outline" (click)="nextPage()" [disabled]="currentPage === totalPages">
        Siguiente
      </ion-button>
    </div>
  </div>
</div>

<div style="height: 40px"></div>
