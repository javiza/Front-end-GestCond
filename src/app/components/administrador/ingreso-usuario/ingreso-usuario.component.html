<div class="container mx-auto bg-white p-6 rounded-lg shadow-md flex flex-col gap-8 items-center">
  <!-- FORMULARIO -->
  <div class="formulario w-full max-w-lg">
   <h3 class="text-xl font-semibold text-[#001b87] mb-4 w-full text-center block">
  Registro de Usuarios
</h3>
     <div class="divider-gradient"></div>
    <form (ngSubmit)="ingresarUsuario()" class="flex flex-col gap-3">
      <ion-item>
        <ion-label position="floating">Nombre de Usuario</ion-label>
        <ion-input [(ngModel)]="nombre" name="nombre" required></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">RUT</ion-label>
        <ion-input
          [(ngModel)]="rut"
          name="rut"
          required
          (ionInput)="onRutInput($event)"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Email</ion-label>
        <ion-input [(ngModel)]="email" name="email" required></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Contrase침a</ion-label>
        <ion-input
          [type]="showPassword ? 'text' : 'password'"
          [(ngModel)]="password"
          name="password"
          required
        ></ion-input>
        <ion-icon
          slot="end"
          [name]="showPassword ? 'eye-off-outline' : 'eye-outline'"
          (click)="togglePasswordVisibility()"
        ></ion-icon>
      </ion-item>

      <ion-item>
        <ion-label>Rol</ion-label>
        <ion-select [(ngModel)]="rol" name="rol" interface="popover" required>
          <ion-select-option value="administrador">Administrador</ion-select-option>
          <ion-select-option value="guardia">Guardia</ion-select-option>
          <ion-select-option value="locatario">Locatario</ion-select-option>
        </ion-select>
      </ion-item>

      <ion-button expand="block" type="submit" color="primary">
        {{ id ? 'Actualizar' : 'Registrar' }}
      </ion-button>

      <ion-button
        expand="block"
        color="medium"
        *ngIf="id"
        (click)="cancelarEdicion()"
      >
        Cancelar edici칩n
      </ion-button>
    </form>
  </div>

  <!-- TABLA DE USUARIOS -->
  <div id="tablaUsuarios" class="lista w-full flex flex-col items-center mt-8">
    <h3 class="text-lg font-semibold text-[#001b87] mb-4 text-center">
      Lista de Usuarios
    </h3>

    <div
      *ngIf="paginatedUsuarios.length > 0; else noUsuarios"
      class="w-full max-w-4xl overflow-x-auto"
    >
      <table
        class="min-w-full border border-gray-400 border-collapse text-sm text-center shadow-sm"
      >
        <thead class="bg-[#001b87] text-white">
          <tr>
            <th class="py-2 px-3 border border-gray-400">Nombre</th>
            <th class="py-2 px-3 border border-gray-400">RUT</th>
            <th class="py-2 px-3 border border-gray-400">Email</th>
            <th class="py-2 px-3 border border-gray-400">Rol</th>
            <th class="py-2 px-3 border border-gray-400">Fecha</th>
            <th class="py-2 px-3 border border-gray-400">Acciones</th>
          </tr>
        </thead>

        <tbody>
          <tr
            *ngFor="let usuario of paginatedUsuarios; let i = index"
            [ngClass]="{
              'bg-gray-50': i % 2 === 0,
              'bg-white': i % 2 !== 0
            }"
            class="hover:bg-blue-50"
          >
            <td class="py-2 px-3 border border-gray-300">{{ usuario.nombre }}</td>
            <td class="py-2 px-3 border border-gray-300">{{ usuario.rut }}</td>
            <td class="py-2 px-3 border border-gray-300">{{ usuario.email }}</td>
            <td class="py-2 px-3 border border-gray-300 capitalize">
              {{ usuario.rol }}
            </td>
            <td class="py-2 px-3 border border-gray-300">
              {{ usuario.fecha_creacion | date : 'short' }}
            </td>
            <td class="py-2 px-3 border border-gray-300 text-center">
              <ion-button fill="clear" size="small" (click)="editarUsuario(usuario)">
                <ion-icon slot="icon-only" name="create-outline"></ion-icon>
              </ion-button>
              <ion-button
                fill="clear"
                color="danger"
                size="small"
                (click)="eliminarUsuario(usuario)"
              >
                <ion-icon slot="icon-only" name="trash-outline"></ion-icon>
              </ion-button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <ng-template #noUsuarios>
      <p class="text-center text-gray-500 mt-4">No hay usuarios registrados.</p>
    </ng-template>

    <!-- Paginaci칩n -->
    <div
      *ngIf="totalPages > 1"
      class="flex items-center justify-center gap-4 mt-6"
    >
      <ion-button
        fill="outline"
        (click)="prevPage()"
        [disabled]="currentPage === 1"
      >
        Anterior
      </ion-button>
      <span>P치gina {{ currentPage }} de {{ totalPages }}</span>
      <ion-button 
        fill="outline"
        (click)="nextPage()"
        [disabled]="currentPage === totalPages"
      >
        Siguiente
      </ion-button>
    </div>
  </div>
</div>

<!-- Espacio final de 100px -->
<div class="espaciador"></div>
